import java.net.InetAddress;
import java.util.Map;
import java.util.TimerTask;

public class Updater extends TimerTask {

	private Map<InetAddress, Long> connectedUsers;
	private long timeLimit;
	
	public Updater(Map<InetAddress, Long> connectedUsers, long timeLimit) {
		this.connectedUsers = connectedUsers;
		this.timeLimit = timeLimit;
	}
	
	@Override
	public void run() {
		long currentTime = System.currentTimeMillis();
		for (Map.Entry<InetAddress, Long> entry : connectedUsers.entrySet())
		    if(entry.getValue() < currentTime - timeLimit)
		    	connectedUsers.remove(entry.getKey());

	}

}
